<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <!-- Favicon Link -->
    <link rel="icon" type="image/png" href="Images/KwikmusicLogo.png" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="Images/apple-touch-icon.png"
    />
    <title>KwikMusic</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Inter", sans-serif;
      }

      body {
        background: url("Images/bg.png") no-repeat center center fixed;
        background-size: cover;
        color: #f0f0f0;
        overflow: hidden;
        height: 100vh;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        position: relative;
      }

      body::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          135deg,
          rgba(9, 1, 17, 0.7),
          rgba(44, 0, 62, 0.7)
        );
        z-index: 0;
      }

      .container {
        position: relative;
        z-index: 2;
        text-align: center;
        padding: 2rem;
        max-width: 100%;
      }

      .neon-title {
        font-size: 5rem;
        font-weight: 800;
        letter-spacing: 0.5rem;
        margin-bottom: 2rem;
        display: flex;
        justify-content: center;
        flex-wrap: wrap; /* Allow wrapping on smaller screens */
      }

      .neon-letter {
        color: transparent; /* Changed from solid to transparent */
        text-shadow: 0 0 10px rgba(255, 221, 153, 0.8),
          0 0 20px rgba(116, 85, 24, 0.8), 0 0 30px rgba(209, 151, 37, 0.6);
        -webkit-text-stroke: 1px rgb(247, 176, 43);
      }

      .flicker {
        animation: letterFlicker 2s infinite alternate;
      }

      @keyframes letterFlicker {
        0%,
        5%,
        10% {
          opacity: 0.2;
          text-shadow: none;
        }
        15%,
        100% {
          opacity: 1;
          text-shadow: 0 0 10px rgba(128, 97, 37, 0.8),
            0 0 20px rgba(125, 93, 29, 0.8), 0 0 30px rgba(127, 89, 12, 0.6);
        }
      }

      @keyframes flicker {
        0%,
        19.999%,
        22%,
        62.999%,
        64%,
        64.999%,
        70%,
        100% {
          opacity: 0.99;
          text-shadow: 0 0 10px rgba(0, 255, 255, 0.8),
            0 0 20px rgba(0, 255, 255, 0.8), 0 0 30px rgba(0, 255, 255, 0.6);
        }
        20%,
        21.999%,
        63%,
        63.999%,
        65%,
        69.999% {
          opacity: 0.4;
          text-shadow: none;
        }
      }

      .subtitle-container {
        background: rgba(255, 255, 255, 0.08);
        backdrop-filter: blur(8px);
        -webkit-backdrop-filter: blur(8px);
        border-radius: 12px;
        border: 1px solid rgba(255, 255, 255, 0.08);
        padding: 1rem 2rem;
        margin-bottom: 2rem;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
      }

      .subtitle {
        font-family: "Dancing Script", cursive;
        font-size: 1.6rem;
        font-weight: 500;
        margin-bottom: 0;
        transform: translateY(10px);
        animation: fadeIn 1s forwards;
        animation-delay: 1s;
        opacity: 0;
        color: #ffd166;
        text-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
        letter-spacing: 1px;
      }

      .nav-container {
        background: rgba(255, 255, 255, 0.05);
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
        border-radius: 15px;
        border: 1px solid rgba(255, 255, 255, 0.05);
        padding: 0.8rem 2rem;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
      }

      .nav-links {
        display: flex;
        justify-content: center;
        gap: 2rem;
        opacity: 0;
        animation: fadeIn 1s forwards;
        animation-delay: 1.5s;
      }

      .nav-links a {
        color: #f0f0f0;
        text-decoration: none;
        font-size: 1rem;
        position: relative;
        padding: 0.5rem 1.2rem;
        transition: all 0.3s ease;
        border-radius: 20px;
        background: rgba(255, 255, 255, 0.05);
        backdrop-filter: blur(8px);
        -webkit-backdrop-filter: blur(8px);
        border: 1px solid rgba(255, 255, 255, 0.1);
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        overflow: hidden;
      }

      .nav-links a::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.2),
          transparent
        );
        transition: 0.5s;
        pointer-events: none;
      }

      .nav-links a:hover::before {
        left: 100%;
      }

      .nav-links a::after {
        content: "";
        position: absolute;
        bottom: 0;
        left: 0;
        width: 0;
        height: 2px;
        background: linear-gradient(
          90deg,
          transparent,
          rgb(255, 247, 0),
          transparent
        );
        transition: width 0.3s ease;
      }

      .nav-links a:hover {
        color: rgb(255, 200, 0);
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
      }

      .nav-links a:hover::after {
        width: 100%;
      }

      /* QR Code Button and Modal Styles */
      .qr-code-btn {
        position: fixed;
        bottom: 50px;
        right: 20px;
        width: 45px;
        height: 45px;
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        border-radius: 50%;
        border: 1px solid rgba(255, 255, 255, 0.1);
        color: #fff;
        font-size: 1.2rem;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        z-index: 999;
      }

      .qr-code-btn:hover {
        transform: scale(1.1);
        background: rgba(255, 200, 0, 0.2);
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3),
          0 0 15px rgba(255, 200, 0, 0.3);
      }

      .qr-code-btn:active {
        transform: scale(0.95);
      }

      .qr-code-modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.7);
        backdrop-filter: blur(8px);
        -webkit-backdrop-filter: blur(8px);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 1000;
        opacity: 0;
        visibility: hidden;
        transition: all 0.4s ease;
      }

      .qr-code-modal.active {
        opacity: 1;
        visibility: visible;
      }

      .qr-code-container {
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(15px);
        -webkit-backdrop-filter: blur(15px);
        padding: 25px;
        border-radius: 20px;
        text-align: center;
        box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
        border: 1px solid rgba(255, 255, 255, 0.1);
        transform: scale(0.8);
        transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        max-width: 85%;
      }

      .qr-code-modal.active .qr-code-container {
        transform: scale(1);
      }

      .qr-code-title {
        font-size: 1.3rem;
        color: #fff;
        margin-bottom: 15px;
        text-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
        background: linear-gradient(90deg, #ffeda3, #ffc107, #ffeda3);
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
      }

      .qr-code-image {
        width: 200px;
        height: 200px;
        background: #fff;
        border-radius: 10px;
        padding: 10px;
        margin: 0 auto 15px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      }

      .qr-code-url {
        color: #fff;
        font-size: 0.9rem;
        margin-bottom: 20px;
        word-break: break-all;
        opacity: 0.9;
      }

      .close-qr-btn {
        background: rgba(0, 0, 0, 0.3);
        border: none;
        color: #fff;
        width: 35px;
        height: 35px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        position: absolute;
        top: 10px;
        right: 10px;
        font-size: 1.2rem;
        transition: all 0.3s ease;
      }

      .close-qr-btn:hover {
        background: rgba(255, 100, 100, 0.3);
        transform: rotate(90deg);
      }

      @media screen and (max-width: 480px) {
        .qr-code-btn {
          bottom: 70px;
          width: 40px;
          height: 40px;
          font-size: 1rem;
        }

        .qr-code-image {
          width: 180px;
          height: 180px;
        }

        .qr-code-title {
          font-size: 1.1rem;
        }
      }

      .rain-container {
        position: absolute;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
        z-index: 1;
        pointer-events: none;
      }

      .raindrop {
        position: absolute;
        width: 1px;
        height: 15px; /* Adjusted dimensions for vertical rain */
        background: linear-gradient(
          to bottom,
          transparent,
          rgba(255, 255, 255, 0.7),
          transparent
        ); /* Changed to white */
        border-radius: 50%;
      }

      .splash {
        position: absolute;
        width: 3px;
        height: 1px;
        background-color: rgba(255, 255, 255, 0.3); /* Changed to white */
        border-radius: 50%;
        transform: scale(0);
      }

      .footer {
        position: absolute;
        bottom: 1rem;
        font-size: 0.8rem;
        opacity: 0.8;
        z-index: 10; /* Lower z-index than player */
        background: rgba(255, 255, 255, 0.05);
        backdrop-filter: blur(8px);
        -webkit-backdrop-filter: blur(8px);
        border-radius: 20px;
        padding: 0.5rem 1.5rem;
        border: 1px solid rgba(255, 255, 255, 0.03);
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      }

      @keyframes fadeIn {
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .sound-control {
        position: absolute;
        top: 20px;
        right: 20px;
        z-index: 10;
        display: flex;
        align-items: center;
      }

      .sound-control button {
        background: rgba(20, 20, 20, 0.6);
        backdrop-filter: blur(8px);
        -webkit-backdrop-filter: blur(8px);
        border: 2px solid rgba(255, 200, 0, 0.3);
        border-radius: 50%;
        width: 50px;
        height: 50px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        font-size: 1.2rem;
        color: white;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3),
          inset 0 0 15px rgba(255, 200, 0, 0.2);
        position: relative;
        overflow: hidden;
      }

      .rain-volume-container {
        background: rgba(20, 20, 20, 0.6);
        backdrop-filter: blur(8px);
        -webkit-backdrop-filter: blur(8px);
        border: 2px solid rgba(255, 200, 0, 0.3);
        border-radius: 20px;
        height: 36px;
        padding: 0 15px;
        margin-right: 10px;
        display: flex;
        align-items: center;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        opacity: 0;
        transform: translateX(20px);
        transition: all 0.3s ease;
        pointer-events: none;
      }

      .rain-volume-container.active {
        opacity: 1;
        transform: translateX(0);
        pointer-events: all;
      }

      .rain-icon {
        color: white;
        margin-right: 8px;
        font-size: 14px;
      }

      .rain-slider {
        width: 80px;
        height: 6px;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 4px;
        position: relative;
        cursor: pointer;
      }

      .rain-level {
        position: absolute;
        top: 0;
        left: 0;
        height: 100%;
        background: linear-gradient(90deg, #79c2ff, #4299e1);
        border-radius: 4px;
        width: 40%; /* Default rain volume level */
      }

      .sound-control button::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: radial-gradient(
          circle at center,
          rgba(255, 200, 0, 0.2),
          transparent 70%
        );
        opacity: 0;
        transition: opacity 0.4s ease;
      }

      .sound-control button:hover {
        transform: scale(1.1) rotate(5deg);
        border-color: rgba(255, 200, 0, 0.7);
        box-shadow: 0 7px 20px rgba(0, 0, 0, 0.4),
          0 0 20px rgba(255, 200, 0, 0.4), inset 0 0 15px rgba(255, 200, 0, 0.3);
      }

      .sound-control button:hover::before {
        opacity: 1;
      }

      .sound-control button:active {
        transform: scale(0.95);
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3),
          inset 0 0 10px rgba(255, 200, 0, 0.2);
      }

      #soundIcon {
        position: relative;
        z-index: 2;
        text-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
      }

      /* Music Player Styles - Enhanced design */
      .music-player {
        position: fixed;
        top: 50%;
        right: 20px; /* Position on right side instead of center */
        transform: translate(0, -50%); /* Only transform vertically */
        width: 320px;
        padding: 25px;
        background: rgba(255, 255, 255, 0.08);
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
        border-radius: 20px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3),
          inset 0 0 0 1px rgba(255, 255, 255, 0.15),
          inset 0 0 20px rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.1);
        z-index: 1000;
        opacity: 0;
        visibility: hidden;
        transition: all 0.5s cubic-bezier(0.19, 1, 0.22, 1);
        text-align: center;
        overflow: hidden;
      }

      /* Fix visibility issues */
      .music-player.active {
        opacity: 1;
        visibility: visible;
        transform: translate(0, -50%); /* Only transform vertically */
      }

      /* Add responsive positioning - right side for desktop, bottom for mobile */
      @media screen and (max-width: 768px) {
        .music-player {
          top: auto;
          right: 0;
          bottom: -100%; /* Start off-screen at bottom */
          left: 0;
          width: 100%;
          max-width: 100%;
          border-radius: 20px 20px 0 0;
          transform: none;
        }

        .music-player.active {
          bottom: 0; /* Slide up from bottom */
          transform: none;
          border-radius: 20px 20px 0 0; /* Ensure consistent border-radius */
        }
      }

      /* Improved animation for mobile player */
      @media screen and (max-width: 768px) {
        .music-player {
          transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        }
      }

      /* Fix center positioning style for mobile */
      @media screen and (max-width: 768px) {
        .music-player.mobile-centered {
          bottom: 50% !important;
          left: 50% !important;
          width: 90% !important;
          max-width: 320px !important;
          border-radius: 20px !important;
          transform: translate(-50%, 50%) !important;
          right: auto !important;
        }
      }

      /* Add draggable styling for desktop */
      @media screen and (min-width: 769px) {
        .music-player {
          cursor: move;
        }

        .music-player.active {
          transform: translate(0, -50%); /* Default position on right side */
        }

        /* Only apply custom positioning after initial appearance */
        .music-player.active.positioned {
          transform: none; /* Allow custom positioning */
        }

        .music-player.dragging {
          opacity: 0.85;
          transition: none;
          box-shadow: 0 15px 50px rgba(0, 0, 0, 0.5),
            inset 0 0 0 1px rgba(255, 255, 255, 0.25),
            0 0 30px rgba(255, 200, 0, 0.2);
        }

        /* Make specific interactive elements have pointer cursor */
        .music-player button,
        .progress-bar,
        .volume-slider,
        .player-artwork {
          cursor: pointer;
        }

        /* Adjust dragHandle to be less prominent but still visible */
        .drag-handle {
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          height: 30px;
          cursor: move;
          border-radius: 20px 20px 0 0;
          background: linear-gradient(
            to bottom,
            rgba(255, 255, 255, 0.15),
            transparent
          );
          opacity: 0;
          transition: opacity 0.3s ease;
        }

        .music-player:hover .drag-handle {
          opacity: 0.5;
        }
      }

      .music-player::before {
        content: "";
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: radial-gradient(
          circle at center,
          rgba(255, 200, 0, 0.03),
          transparent 40%
        );
        opacity: 0;
        transform: rotate(0deg);
        transition: opacity 0.8s ease, transform 15s linear;
        pointer-events: none;
      }

      /* Enhanced player artwork hover effects */
      .player-artwork {
        width: 240px;
        height: 135px; /* 16:9 aspect ratio */
        margin: 0 auto 20px;
        border-radius: 12px;
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.5),
          0 0 0 1px rgba(255, 255, 255, 0.1);
        background-color: rgba(0, 0, 0, 0.2);
        background-size: contain;
        background-position: center;
        background-repeat: no-repeat;
        position: relative;
        overflow: hidden;
        border: 1px solid rgba(255, 255, 255, 0.2);
        transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275),
          box-shadow 0.5s ease, border-color 0.5s ease, filter 0.5s ease;
        cursor: pointer;
        z-index: 2;
      }

      .player-artwork:hover {
        transform: scale(1.15) translateY(-5px) rotate(1deg);
        box-shadow: 0 15px 40px rgba(0, 0, 0, 0.6),
          0 0 20px rgba(255, 200, 0, 0.4), 0 0 40px rgba(255, 120, 0, 0.2);
        border-color: rgba(255, 230, 100, 0.7);
        filter: brightness(1.1) contrast(1.05);
        z-index: 3;
      }

      /* Add pulsing glow animation on hover */
      @keyframes artworkGlow {
        0% {
          box-shadow: 0 8px 25px rgba(0, 0, 0, 0.5),
            0 0 15px rgba(255, 200, 0, 0.3);
        }
        50% {
          box-shadow: 0 15px 40px rgba(0, 0, 0, 0.6),
            0 0 30px rgba(255, 200, 0, 0.5);
        }
        100% {
          box-shadow: 0 8px 25px rgba(0, 0, 0, 0.5),
            0 0 15px rgba(255, 200, 0, 0.3);
        }
      }

      .player-artwork:hover {
        animation: artworkGlow 2s infinite ease-in-out;
      }

      .player-song-info {
        margin-bottom: 18px;
        color: #fff;
        position: relative;
      }

      .player-title {
        font-size: 1.2rem;
        font-weight: 600;
        margin-bottom: 5px;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        background: linear-gradient(90deg, #ffeda3, #ffc107, #ffeda3);
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
        position: relative;
      }

      .player-time {
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 0.8rem;
        color: rgba(255, 255, 255, 0.8);
        margin: 8px 0;
      }

      .player-progress {
        width: 100%;
        margin: 10px 0;
        position: relative;
      }

      .progress-bar {
        width: 100%;
        height: 6px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 6px;
        cursor: pointer;
        position: relative;
        box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.2);
        overflow: hidden;
      }

      .progress-bar::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.1),
          transparent
        );
        animation: progressShine 3s infinite linear;
      }

      @keyframes progressShine {
        to {
          left: 100%;
        }
      }

      .progress-current {
        position: absolute;
        top: 0;
        left: 0;
        height: 100%;
        background: linear-gradient(90deg, #ffdd99, #ff9d00);
        border-radius: 6px;
        width: 0%;
        box-shadow: 0 0 8px rgba(255, 157, 0, 0.5);
      }

      .progress-handle {
        position: absolute;
        top: 50%;
        transform: translate(-50%, -50%);
        width: 14px;
        height: 14px;
        border-radius: 50%;
        background: #fff;
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.3);
        left: 0%;
        cursor: pointer;
        transition: transform 0.2s ease;
        border: 2px solid rgba(255, 255, 255, 0.9);
      }

      .progress-handle:hover {
        transform: translate(-50%, -50%) scale(1.2);
        box-shadow: 0 1px 10px rgba(255, 157, 0, 0.6);
      }

      .player-controls {
        display: flex;
        justify-content: center;
        align-items: center;
        margin: 16px 0;
      }

      .player-btn {
        background: rgba(255, 255, 255, 0.1);
        border: none;
        width: 42px;
        height: 42px;
        border-radius: 50%;
        margin: 0 10px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
        color: #fff;
        font-size: 1rem;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2),
          inset 0 0 0 1px rgba(255, 255, 255, 0.1);
        position: relative;
        overflow: hidden;
      }

      .player-btn::after {
        content: "";
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: radial-gradient(
          circle at center,
          rgba(255, 255, 255, 0.3),
          transparent 70%
        );
        opacity: 0;
        transition: opacity 0.3s ease;
      }

      .player-btn:hover {
        background: rgba(255, 200, 0, 0.25);
        transform: translateY(-3px) scale(1.05);
        box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3),
          0 0 15px rgba(255, 200, 0, 0.3),
          inset 0 0 0 1px rgba(255, 255, 255, 0.2);
      }

      .player-btn:hover::after {
        opacity: 0.5;
      }

      .player-btn:active {
        transform: translateY(0) scale(0.95);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2),
          inset 0 0 0 1px rgba(255, 255, 255, 0.1);
      }

      .player-btn.play-pause {
        width: 56px;
        height: 56px;
        font-size: 1.5rem;
        background: linear-gradient(
          135deg,
          rgba(255, 200, 0, 0.2),
          rgba(255, 140, 0, 0.2)
        );
        box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3),
          0 0 15px rgba(255, 200, 0, 0.2),
          inset 0 0 0 1px rgba(255, 255, 255, 0.15);
      }

      .player-btn.play-pause:hover {
        background: linear-gradient(
          135deg,
          rgba(255, 200, 0, 0.3),
          rgba(255, 140, 0, 0.3)
        );
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.4),
          0 0 20px rgba(255, 200, 0, 0.4),
          inset 0 0 0 1px rgba(255, 255, 255, 0.2);
      }

      .volume-control {
        display: flex;
        align-items: center;
        justify-content: center;
        margin-top: 15px;
        background: rgba(255, 255, 255, 0.05);
        padding: 8px 15px;
        border-radius: 20px;
        box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
      }

      .volume-icon {
        color: #fff;
        margin-right: 10px;
        font-size: 1rem;
        text-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
      }

      .volume-slider {
        width: 100px;
        height: 6px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 3px;
        position: relative;
        cursor: pointer;
        box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.2);
      }

      .volume-level {
        position: absolute;
        top: 0;
        left: 0;
        height: 100%;
        background: linear-gradient(90deg, #ffdd99, #ff9d00);
        border-radius: 3px;
        width: 70%; /* Default volume level */
      }

      .close-player {
        position: absolute;
        top: 8px;
        right: 8px;
        background: rgba(0, 0, 0, 0.2);
        border: none;
        color: rgba(255, 255, 255, 0.7);
        cursor: pointer;
        font-size: 1.2rem;
        transition: all 0.3s ease;
        width: 30px;
        height: 30px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.05);
        transform: translate(5px, -5px);
        opacity: 0.7;
      }

      .close-player:hover {
        color: #fff;
        background: rgba(255, 100, 100, 0.3);
        transform: translate(5px, -5px) rotate(90deg);
        opacity: 1;
      }

      @media screen and (max-width: 768px) {
        body {
          background: url("Images/Phonebg.jpeg") no-repeat center center fixed;
          background-size: cover;
        }

        body::before {
          background: linear-gradient(
            135deg,
            rgba(9, 1, 17, 0.65),
            rgba(44, 0, 62, 0.65)
          );
        }

        .container {
          padding: 1.5rem 1rem;
        }

        .neon-title {
          font-size: 3.5rem;
          letter-spacing: 0.3rem;
          padding: 0 10px;
        }

        .nav-links {
          flex-wrap: wrap;
          gap: 1rem;
        }

        .nav-links a {
          padding: 0.4rem 1rem;
          font-size: 0.9rem;
        }

        .subtitle-container {
          padding: 0.8rem 1.5rem;
          margin-bottom: 1.5rem;
        }

        .subtitle {
          font-size: 1.4rem;
        }
      }

      @media screen and (max-width: 480px) {
        .container {
          padding: 1rem 0.8rem;
        }

        .neon-title {
          font-size: 2.5rem;
          letter-spacing: 0.15rem;
          padding: 0 5px;
          margin-bottom: 1.5rem;
        }

        .neon-letter {
          margin: 0 2px;
        }

        .nav-container {
          padding: 0.6rem 1rem;
        }

        .nav-links {
          gap: 0.8rem;
        }

        .nav-links a {
          padding: 0.3rem 0.8rem;
          font-size: 0.8rem;
        }

        .subtitle-container {
          padding: 0.7rem 1.2rem;
          margin-bottom: 1.2rem;
        }

        .subtitle {
          font-size: 1.2rem;
        }

        .sound-control {
          top: 15px;
          right: 15px;
        }

        .sound-control button {
          width: 40px;
          height: 40px;
          font-size: 1rem;
        }

        .rain-volume-container {
          height: 30px;
          padding: 0 10px;
          margin-right: 8px;
        }

        .rain-slider {
          width: 60px;
          height: 4px;
        }

        .rain-icon {
          font-size: 12px;
        }

        .footer {
          padding: 0.3rem 1rem;
          font-size: 0.7rem;
          z-index: 99; /* Make sure footer is below player */
        }

        .music-player {
          width: 90%; /* Use percentage width for better responsiveness */
          max-width: 280px;
          padding: 20px 15px;
        }

        .player-artwork {
          width: 180px;
          height: 101px; /* Maintain 16:9 aspect ratio */
          margin-bottom: 15px;
        }

        .player-title {
          font-size: 1.1rem;
        }

        .player-btn {
          width: 38px;
          height: 38px;
          margin: 0 8px;
        }

        .player-btn.play-pause {
          width: 50px;
          height: 50px;
          font-size: 1.3rem;
        }

        .player-time {
          font-size: 0.8rem;
        }

        /* Increase tap target size for mobile */
        .progress-bar,
        .volume-slider {
          height: 12px;
        }

        .progress-handle {
          width: 20px;
          height: 20px;
        }

        .volume-control {
          margin-top: 15px;
        }

        .volume-slider {
          width: 80px;
        }
      }

      @media screen and (max-width: 380px) {
        .neon-title {
          font-size: 2rem;
          letter-spacing: 0.1rem;
        }

        .neon-letter {
          margin: 0 1px;
        }

        .music-player {
          width: 250px;
        }

        .player-artwork {
          width: 160px;
          height: 90px; /* Maintain 16:9 aspect ratio */
        }
      }

      @media screen and (max-height: 600px) {
        /* Additional media query for short screens */
        .music-player {
          padding: 10px;
          right: 10px; /* Adjust right positioning for small screens */
        }

        .player-artwork {
          width: 160px;
          height: 90px; /* Maintain 16:9 aspect ratio */
          margin-bottom: 8px;
        }

        .music-player.active {
          bottom: 0; /* For mobile */
        }

        .player-controls {
          margin-bottom: 10px;
        }

        .volume-control {
          margin-top: 8px;
        }
      }

      /* Category Selector Styles */
      .category-selector {
        display: flex;
        justify-content: center;
        margin-bottom: 1.5rem;
        background: rgba(255, 255, 255, 0.08);
        backdrop-filter: blur(8px);
        -webkit-backdrop-filter: blur(8px);
        border-radius: 12px;
        border: 1px solid rgba(255, 255, 255, 0.08);
        padding: 0.8rem 1.5rem;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
      }

      .category-btn {
        background: none;
        border: none;
        color: #f0f0f0;
        padding: 8px 20px;
        margin: 0 10px;
        font-size: 1rem;
        border-radius: 20px;
        cursor: pointer;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
        background: rgba(255, 255, 255, 0.05);
        backdrop-filter: blur(8px);
        -webkit-backdrop-filter: blur(8px);
        border: 1px solid rgba(255, 255, 255, 0.1);
      }

      .category-btn::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.2),
          transparent
        );
        transition: 0.5s;
      }

      .category-btn:hover::before {
        left: 100%;
      }

      .category-btn.active {
        background: rgba(255, 200, 0, 0.15);
        color: rgb(255, 230, 100);
        box-shadow: 0 0 15px rgba(255, 200, 0, 0.4);
        border-color: rgba(255, 200, 0, 0.8);
      }

      .music-category {
        opacity: 0;
        height: 0;
        overflow: hidden;
        transition: opacity 0.5s ease;
        position: absolute;
        width: 100%;
        pointer-events: none;
      }

      .music-category.active {
        opacity: 1;
        height: auto;
        position: relative;
        pointer-events: all;
      }

      /* Music Grid styles for displaying old music */
      .music-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
        gap: 15px;
        max-height: 300px;
        overflow-y: auto;
        padding: 10px;
        margin-top: 10px;
        background: rgba(0, 0, 0, 0.2);
        border-radius: 10px;
        backdrop-filter: blur(5px);
        -webkit-backdrop-filter: blur(5px);
        border: 1px solid rgba(255, 255, 255, 0.05);
        scrollbar-width: thin;
        scrollbar-color: rgba(255, 200, 0, 0.3) rgba(0, 0, 0, 0.2);
      }

      .music-grid::-webkit-scrollbar {
        width: 6px;
      }

      .music-grid::-webkit-scrollbar-track {
        background: rgba(0, 0, 0, 0.2);
        border-radius: 10px;
      }

      .music-grid::-webkit-scrollbar-thumb {
        background: rgba(255, 200, 0, 0.3);
        border-radius: 10px;
      }

      .music-item {
        background: rgba(0, 0, 0, 0.3);
        border-radius: 12px;
        padding: 15px 10px;
        cursor: pointer;
        transition: all 0.45s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        text-align: center;
        position: relative;
        overflow: hidden;
        border: 1px solid rgba(255, 255, 255, 0.08);
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      }

      /* Add creative gradient background with subtle animation */
      .music-item::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(
          135deg,
          rgba(255, 200, 0, 0.03) 0%,
          rgba(255, 128, 0, 0.03) 50%,
          rgba(255, 0, 128, 0.03) 100%
        );
        opacity: 0;
        transition: opacity 0.5s ease;
        z-index: -1;
        border-radius: 12px;
      }

      /* Add decorative vinyl record effect */
      .music-icon {
        font-size: 26px;
        margin-bottom: 10px;
        position: relative;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 60px;
        height: 60px;
        background: radial-gradient(
          circle at center,
          rgba(0, 0, 0, 0.6) 0%,
          rgba(0, 0, 0, 0.4) 35%,
          rgba(40, 40, 40, 0.3) 60%,
          rgba(60, 60, 60, 0.2) 100%
        );
        border-radius: 50%;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        transition: all 0.4s ease;
      }

      .music-icon::before {
        content: "";
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 10px;
        height: 10px;
        background: linear-gradient(135deg, #ffdd99, #ff9d00);
        border-radius: 50%;
        z-index: 1;
      }

      .music-icon::after {
        content: "";
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 40px;
        height: 40px;
        border: 1px solid rgba(255, 255, 255, 0.15);
        border-radius: 50%;
      }

      /* Enhance hover effects */
      .music-item:hover {
        transform: translateY(-8px) scale(1.05);
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.4),
          0 0 20px rgba(255, 200, 0, 0.2);
        border-color: rgba(255, 200, 0, 0.3);
        background: linear-gradient(
          135deg,
          rgba(10, 10, 10, 0.8),
          rgba(30, 30, 30, 0.8)
        );
      }

      .music-item:hover::before {
        opacity: 1;
      }

      .music-item:hover .music-icon {
        transform: rotate(30deg);
        box-shadow: 0 0 20px rgba(255, 200, 0, 0.3);
      }

      /* Add vinyl spin animation for playing state */
      @keyframes vinylSpin {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }

      .music-item.playing .music-icon {
        animation: vinylSpin 5s linear infinite;
        box-shadow: 0 0 25px rgba(255, 200, 0, 0.5);
        background: radial-gradient(
          circle at center,
          rgba(0, 0, 0, 0.8) 0%,
          rgba(20, 20, 20, 0.6) 35%,
          rgba(40, 40, 40, 0.4) 60%,
          rgba(60, 60, 60, 0.2) 100%
        );
      }

      /* Enhance playing state */
      .music-item.playing {
        background: linear-gradient(
          135deg,
          Ã· rgba(20, 20, 20, 0.9),
          rgba(40, 40, 40, 0.9)
        );
        border-color: rgba(255, 200, 0, 0.5);
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3),
          0 0 20px rgba(255, 200, 0, 0.3);
        transform: translateY(-5px) scale(1.03);
      }

      /* Improve music title style */
      .music-title {
        font-size: 0.9rem;
        font-weight: 500;
        color: #fff;
        text-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
        margin-top: 8px;
        background: linear-gradient(90deg, #ffeda3, #ffc107, #ffeda3);
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        transition: all 0.3s ease;
      }

      .music-item:hover .music-title {
        color: rgba(255, 255, 255, 0.9);
        text-shadow: 0 0 10px rgba(255, 200, 0, 0.5);
      }

      /* Update hover effect for better interaction */
      .music-item:active {
        transform: translateY(-2px) scale(1.02);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        transition: all 0.2s ease;
      }

      /* Improve music grid overall appearance */
      .music-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
        gap: 20px;
        max-height: 320px;
        overflow-y: auto;
        padding: 15px;
        margin-top: 10px;
        background: rgba(0, 0, 0, 0.3);
        border-radius: 16px;
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.1);
        scrollbar-width: thin;
        scrollbar-color: rgba(255, 200, 0, 0.3) rgba(0, 0, 0, 0.2);
      }

      /* Responsive adjustments */
      @media screen and (max-width: 768px) {
        .music-grid {
          grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
          max-height: 280px;
          gap: 15px;
        }

        .music-icon {
          width: 50px;
          height: 50px;
          font-size: 22px;
        }

        .music-icon::after {
          width: 35px;
          height: 35px;
        }
      }

      @media screen and (max-width: 480px) {
        .music-grid {
          grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
          max-height: 240px;
          gap: 12px;
          padding: 12px;
        }

        .music-item {
          padding: 12px 8px;
        }

        .music-icon {
          width: 45px;
          height: 45px;
          font-size: 20px;
        }

        .music-icon::after {
          width: 30px;
          height: 30px;
        }

        .music-title {
          font-size: 0.8rem;
        }
      }

      /* Shuffle Button Styles */
      .player-btn.shuffle {
        position: absolute;
        bottom: 10px;
        right: 10px;
        width: 28px;
        height: 28px;
        z-index: 5;
        background: rgba(0, 0, 0, 0.5);
        border: 1px solid rgba(255, 255, 255, 0.2);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2),
          inset 0 0 0 1px rgba(255, 255, 255, 0.15);
        overflow: visible;
        margin: 0;
        font-size: 0.8rem;
        padding: 0;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .player-btn.shuffle::before {
        content: "";
        position: absolute;
        inset: -1px;
        border-radius: 50%;
        padding: 1px;
        background: linear-gradient(
          135deg,
          rgba(255, 255, 255, 0.5),
          rgba(255, 255, 255, 0.2),
          rgba(255, 255, 255, 0),
          rgba(255, 255, 255, 0.2)
        );
        -webkit-mask: linear-gradient(#000 0 0) content-box,
          linear-gradient(#000 0 0);
        -webkit-mask-composite: xor;
        mask-composite: exclude;
        pointer-events: none;
      }

      .player-btn.shuffle::after {
        content: "";
        position: absolute;
        inset: -2px;
        border-radius: 50%;
        background: radial-gradient(
          circle at 70% 70%,
          rgba(255, 200, 0, 0.4),
          transparent 50%
        );
        opacity: 0;
        transition: opacity 0.3s ease;
        pointer-events: none;
      }

      .player-btn.shuffle:hover::after {
        opacity: 1;
      }

      .player-btn.shuffle.active {
        background: rgba(255, 200, 0, 0.25);
        box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3),
          0 0 15px rgba(255, 200, 0, 0.4),
          inset 0 0 0 1px rgba(255, 230, 100, 0.3);
      }

      .player-btn.shuffle.active::before {
        background: linear-gradient(
          135deg,
          rgba(255, 230, 100, 0.8),
          rgba(255, 200, 0, 0.3),
          rgba(255, 200, 0, 0),
          rgba(255, 230, 100, 0.4)
        );
      }

      /* Add breathing glow effect for active shuffle */
      @keyframes breatheGlow {
        0%,
        100% {
          box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2),
            0 0 10px rgba(255, 200, 0, 0.2),
            inset 0 0 0 1px rgba(255, 230, 100, 0.3);
        }
        50% {
          box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3),
            0 0 20px rgba(255, 200, 0, 0.4),
            inset 0 0 0 1px rgba(255, 230, 100, 0.5);
        }
      }

      .player-btn.shuffle.active {
        animation: breatheGlow 3s infinite ease-in-out;
      }

      /* Update shuffle button styles to position it in the bottom right corner of artwork */
      .player-btn.shuffle {
        position: absolute;
        bottom: 10px;
        right: 10px;
        width: 28px;
        height: 28px;
        z-index: 5;
        background: rgba(0, 0, 0, 0.5);
        border: 1px solid rgba(255, 255, 255, 0.2);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2),
          inset 0 0 0 1px rgba(255, 255, 255, 0.15);
        overflow: visible;
        margin: 0;
        font-size: 0.8rem;
        padding: 0;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      /* Adjust hover effect for the smaller button */
      .player-btn.shuffle:hover {
        transform: translateY(-2px) scale(1.05);
      }

      .player-btn.shuffle:active {
        transform: translateY(0) scale(0.95);
      }

      /* Adjust media queries for smaller screens */
      @media screen and (max-width: 480px) {
        .player-btn.shuffle {
          width: 24px;
          height: 24px;
          font-size: 0.7rem;
          bottom: 8px;
          right: 8px;
        }
      }
    </style>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Dancing+Script:wght@500;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="css/responsive.css" />
  </head>
  <body>
    <div class="rain-container" id="rainContainer"></div>

    <!-- Audio elements -->
    <audio id="rainSound" loop preload="auto">
      <source src="music/Rain.m4a" type="audio/mp4" />
      Your browser does not support the audio element.
    </audio>

    <!-- My Music audio tracks -->
    <audio id="bassIshqTrack" preload="auto">
      <source src="music/BassIshq.mp3" type="audio/mpeg" />
      Your browser does not support the audio element.
    </audio>

    <audio id="dilKiDuniyaTrack" preload="auto">
      <source
        src="music/Dil Ki Duniya Ujaad Baithi Hai.mp3"
        type="audio/mpeg"
      />
      Your browser does not support the audio element.
    </audio>

    <audio id="moonTrack" preload="auto">
      <source src="music/Moon.mp3" type="audio/mpeg" />
      Your browser does not support the audio element.
    </audio>

    <!-- Old music tracks -->
    <audio id="ahistaAhistaTrack" preload="none">
      <source src="music/oldmusic/Ahista Ahista.mp3" type="audio/mpeg" />
    </audio>
    <audio id="chupkeChupkeTrack" preload="none">
      <source src="music/oldmusic/Chupke Chupke.mp3" type="audio/mpeg" />
    </audio>
    <audio id="dilToBachchaTrack" preload="none">
      <source src="music/oldmusic/DIL TO BACHCHA HAI.mp3" type="audio/mpeg" />
    </audio>
    <audio id="hamariSansonTrack" preload="none">
      <source src="music/oldmusic/HAMARI SANSON.mp3" type="audio/mpeg" />
    </audio>
    <audio id="hastaNooraniTrack" preload="none">
      <source src="music/oldmusic/Hasta Hua Noorani.mp3" type="audio/mpeg" />
    </audio>
    <audio id="janeWohKaiseTrack" preload="none">
      <source src="music/oldmusic/Jane Woh Kaise.mp3" type="audio/mpeg" />
    </audio>
    <audio id="kaunTujheTrack" preload="none">
      <source src="music/oldmusic/Kaun Tujhe.mp3" type="audio/mpeg" />
    </audio>
    <audio id="mereMehboobTrack" preload="none">
      <source src="music/oldmusic/Mere Mehboob.mp3" type="audio/mpeg" />
    </audio>
    <audio id="raftaRaftaTrack" preload="none">
      <source src="music/oldmusic/Rafta Rafta.mp3" type="audio/mpeg" />
    </audio>
    <audio id="usModSeTrack" preload="none">
      <source src="music/oldmusic/Us Mod Se.mp3" type="audio/mpeg" />
    </audio>
    <audio id="yehHastaTrack" preload="none">
      <source src="music/oldmusic/Yeh Hansta Hua.mp3" type="audio/mpeg" />
    </audio>
    <audio id="yehShaamTrack" preload="none">
      <source src="music/oldmusic/Yeh Shaam.mp3" type="audio/mpeg" />
    </audio>
    <audio id="yehWadaTrack" preload="none">
      <source src="music/oldmusic/Yeh Wada Raha.mp3" type="audio/mpeg" />
    </audio>

    <!-- New Songs audio tracks -->
    <audio id="ishqTrack" preload="none">
      <source src="music/newmusic/Ishq.mp3" type="audio/mpeg" />
    </audio>
    <audio id="palPalTrack" preload="none">
      <source src="music/newmusic/ Pal Pal.mp3" type="audio/mpeg" />
    </audio>
    <audio id="radhaTrack" preload="none">
      <source src="music/newmusic/ Radha.mp3" type="audio/mpeg" />
    </audio>
    <audio id="maandTrack" preload="none">
      <source src="music/newmusic/Maand.mp3" type="audio/mpeg" />
    </audio>
    <audio id="findingHerTrack" preload="none">
      <source src="music/newmusic/Finding Her.mp3" type="audio/mpeg" />
    </audio>
    <audio id="chalDiyeTrack" preload="none">
      <source src="music/newmusic/Chal Diye Tum Kahan.mp3" type="audio/mpeg" />
    </audio>
    <audio id="jholTrack" preload="none">
      <source src="music/newmusic/Jhol.mp3" type="audio/mpeg" />
    </audio>

    <!-- Add sound control button -->
    <div class="sound-control">
      <div class="rain-volume-container" id="rainVolumeContainer">
        <span class="rain-icon">ðŸ’§</span>
        <div class="rain-slider" id="rainVolumeSlider">
          <div class="rain-level" id="rainVolumeLevel"></div>
        </div>
      </div>
      <button id="soundToggle" aria-label="Toggle sound">
        <span id="soundIcon">â›†</span>
      </button>
    </div>

    <div class="container">
      <h1 class="neon-title">
        <span class="neon-letter">K</span>
        <span class="neon-letter">W</span>
        <span class="neon-letter">I</span>
        <span class="neon-letter">K</span>
        <span class="neon-letter">M</span>
        <span class="neon-letter">U</span>
        <span class="neon-letter">S</span>
        <span class="neon-letter">I</span>
        <span class="neon-letter">C</span>
      </h1>

      <!-- Category selector buttons -->
      <div class="category-selector">
        <button id="likedMusicBtn" class="category-btn active">Mehfeel</button>
        <button id="newSongsBtn" class="category-btn">Sukoon</button>
        <button id="myMusicBtn" class="category-btn">Mine</button>
      </div>

      <!-- My Music Category -->
      <div id="myMusicCategory" class="music-category">
        <div class="subtitle-container">
          <p class="subtitle">Play Music Created By Me</p>
        </div>
        <div class="nav-container">
          <div class="nav-links">
            <a href="#" id="homeBtn">KhamIshq</a>
            <a href="#" id="workBtn">Dil Ki Duniya</a>
            <a href="#" id="aboutBtn">MoonShine</a>
            <a href="#" id="contactBtn">Coming Soon</a>
          </div>
        </div>
      </div>

      <!-- Liked Music Category -->
      <div id="likedMusicCategory" class="music-category active">
        <div class="subtitle-container">
          <p class="subtitle">Mehfeel-E-Zindagi</p>
        </div>
        <div class="music-grid" id="oldMusicGrid">
          <!-- Music items will be generated by JavaScript -->
        </div>
      </div>

      <!-- New Songs Category -->
      <div id="newSongsCategory" class="music-category">
        <div class="subtitle-container">
          <p class="subtitle">Lamhon Ki Khataye Lafzon Me Kya Bataye</p>
        </div>
        <div class="music-grid" id="newSongsGrid">
          <!-- Music items will be generated by JavaScript -->
        </div>
      </div>
    </div>

    <div class="music-player" id="musicPlayer">
      <div class="drag-handle" id="dragHandle"></div>
      <button class="close-player" id="closePlayer">Ã—</button>
      <div class="player-artwork" id="playerArtwork">
        <button class="player-btn shuffle" id="shuffleBtn" title="Shuffle">
          á€‘
        </button>
      </div>
      <div class="player-song-info">
        <div class="player-title" id="playerTitle">Select a track</div>
      </div>
      <div class="player-progress">
        <div class="progress-bar" id="progressBar">
          <div class="progress-current" id="progressCurrent"></div>
          <div class="progress-handle" id="progressHandle"></div>
        </div>
      </div>
      <div class="player-time">
        <span id="currentTime">0:00</span> / <span id="totalTime">0:00</span>
      </div>
      <div class="player-controls">
        <button class="player-btn" id="prevBtn">â®</button>
        <button class="player-btn play-pause" id="playPauseBtn">â–¶</button>
        <button class="player-btn" id="nextBtn">â­</button>
      </div>
      <div class="volume-control">
        <div class="volume-icon">ðŸ”Š</div>
        <div class="volume-slider" id="volumeSlider">
          <div class="volume-level" id="volumeLevel"></div>
        </div>
      </div>
    </div>

    <div class="footer">Â© 2025 ABUZAR</div>

    <!-- QR Code Button -->
    <button class="qr-code-btn" id="qrCodeBtn" aria-label="Show QR Code">
      <span>âŠž</span>
    </button>

    <!-- QR Code Modal -->
    <div class="qr-code-modal" id="qrCodeModal">
      <div class="qr-code-container">
        <button class="close-qr-btn" id="closeQrBtn">Ã—</button>
        <h3 class="qr-code-title">Scan to visit KwikMusic</h3>
        <div class="qr-code-image">
          <img
            src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=https://kwikmusic.netlify.app/"
            alt="QR Code for KwikMusic"
            width="100%"
            height="100%"
          />
        </div>
        <p class="qr-code-url">https://kwikmusic.netlify.app/</p>
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const rainContainer = document.getElementById("rainContainer");
        const rainSound = document.getElementById("rainSound");
        const soundToggle = document.getElementById("soundToggle");
        const soundIcon = document.getElementById("soundIcon");
        const rainVolumeContainer = document.getElementById(
          "rainVolumeContainer"
        );
        const rainVolumeSlider = document.getElementById("rainVolumeSlider");
        const rainVolumeLevel = document.getElementById("rainVolumeLevel");

        // Hide rain container initially
        rainContainer.style.opacity = "0";

        // Get music tracks - Original
        const bassIshqTrack = document.getElementById("bassIshqTrack");
        const dilKiDuniyaTrack = document.getElementById("dilKiDuniyaTrack");
        const moonTrack = document.getElementById("moonTrack");

        // Get old music tracks
        const oldMusicTracks = [
          {
            id: "ahistaAhistaTrack",
            element: document.getElementById("ahistaAhistaTrack"),
            title: "Ahista Ahista",
          },
          {
            id: "chupkeChupkeTrack",
            element: document.getElementById("chupkeChupkeTrack"),
            title: "Chupke Chupke",
          },
          {
            id: "dilToBachchaTrack",
            element: document.getElementById("dilToBachchaTrack"),
            title: "Dil To Bachcha Hai",
          },
          {
            id: "hamariSansonTrack",
            element: document.getElementById("hamariSansonTrack"),
            title: "Hamari Sanson",
          },
          {
            id: "hastaNooraniTrack",
            element: document.getElementById("hastaNooraniTrack"),
            title: "Hasta Hua Noorani",
          },
          {
            id: "janeWohKaiseTrack",
            element: document.getElementById("janeWohKaiseTrack"),
            title: "Jane Woh Kaise",
          },
          {
            id: "kaunTujheTrack",
            element: document.getElementById("kaunTujheTrack"),
            title: "Kaun Tujhe",
          },
          {
            id: "mereMehboobTrack",
            element: document.getElementById("mereMehboobTrack"),
            title: "Mere Mehboob",
          },
          {
            id: "raftaRaftaTrack",
            element: document.getElementById("raftaRaftaTrack"),
            title: "Rafta Rafta",
          },
          {
            id: "usModSeTrack",
            element: document.getElementById("usModSeTrack"),
            title: "Us Mod Se",
          },
          {
            id: "yehHastaTrack",
            element: document.getElementById("yehHastaTrack"),
            title: "Yeh Hansta Hua",
          },
          {
            id: "yehShaamTrack",
            element: document.getElementById("yehShaamTrack"),
            title: "Yeh Shaam",
          },
          {
            id: "yehWadaTrack",
            element: document.getElementById("yehWadaTrack"),
            title: "Yeh Wada Raha",
          },
        ];

        // Get new songs tracks
        const newSongsTracks = [
          {
            id: "ishqTrack",
            element: document.getElementById("ishqTrack"),
            title: "Ishq",
          },
          {
            id: "palPalTrack",
            element: document.getElementById("palPalTrack"),
            title: "Pal Pal",
          },
          {
            id: "radhaTrack",
            element: document.getElementById("radhaTrack"),
            title: "Radha",
          },
          {
            id: "maandTrack",
            element: document.getElementById("maandTrack"),
            title: "Maand",
          },
          {
            id: "findingHerTrack",
            element: document.getElementById("findingHerTrack"),
            title: "Finding Her",
          },
          {
            id: "chalDiyeTrack",
            element: document.getElementById("chalDiyeTrack"),
            title: "Chal Diye Tum Kahan",
          },
          {
            id: "jholTrack",
            element: document.getElementById("jholTrack"),
            title: "Jhol",
          },
        ];

        // Get category buttons
        const myMusicBtn = document.getElementById("myMusicBtn");
        const likedMusicBtn = document.getElementById("likedMusicBtn");
        const newSongsBtn = document.getElementById("newSongsBtn");
        const myMusicCategory = document.getElementById("myMusicCategory");
        const likedMusicCategory =
          document.getElementById("likedMusicCategory");
        const newSongsCategory = document.getElementById("newSongsCategory");

        // Generate old music grid items
        const oldMusicGrid = document.getElementById("oldMusicGrid");
        generateOldMusicGrid();

        // Generate new songs grid items
        const newSongsGrid = document.getElementById("newSongsGrid");
        generateNewSongsGrid();

        // Track the current active category
        let activeCategory = "myMusic";

        // Function to generate the new songs grid
        function generateNewSongsGrid() {
          newSongsGrid.innerHTML = ""; // Clear existing content

          newSongsTracks.forEach((track) => {
            const musicItem = document.createElement("div");
            musicItem.classList.add("music-item");
            musicItem.dataset.trackId = track.id;

            const musicIcon = document.createElement("div");
            musicIcon.classList.add("music-icon");
            musicIcon.innerHTML = "ðŸŽµ"; // Different icon for new songs

            const musicTitle = document.createElement("div");
            musicTitle.classList.add("music-title");
            musicTitle.textContent = track.title;

            musicItem.appendChild(musicIcon);
            musicItem.appendChild(musicTitle);

            // Add click event
            musicItem.addEventListener("click", () => {
              playNewSong(track);
            });

            newSongsGrid.appendChild(musicItem);
          });
        }

        // Function to generate the old music grid
        function generateOldMusicGrid() {
          oldMusicGrid.innerHTML = ""; // Clear existing content

          oldMusicTracks.forEach((track) => {
            const musicItem = document.createElement("div");
            musicItem.classList.add("music-item");
            musicItem.dataset.trackId = track.id;

            const musicIcon = document.createElement("div");
            musicIcon.classList.add("music-icon");
            musicIcon.innerHTML = "ðŸ“¼";

            const musicTitle = document.createElement("div");
            musicTitle.classList.add("music-title");
            musicTitle.textContent = track.title;

            musicItem.appendChild(musicIcon);
            musicItem.appendChild(musicTitle);

            // Add click event
            musicItem.addEventListener("click", () => {
              playOldMusic(track);
            });

            oldMusicGrid.appendChild(musicItem);
          });
        }

        // Toggle between music categories
        myMusicBtn.addEventListener("click", () => {
          myMusicBtn.classList.add("active");
          likedMusicBtn.classList.remove("active");
          newSongsBtn.classList.remove("active");

          myMusicCategory.classList.add("active");
          likedMusicCategory.classList.remove("active");
          newSongsCategory.classList.remove("active");

          activeCategory = "myMusic";

          // If music is currently playing from another category, stop it
          if (currentTrack && !isMyMusicTrack(currentTrack)) {
            stopAllTracks();
            currentTrack = null;
            currentTrackIndex = -1;
            hidePlayer();
          }
        });

        likedMusicBtn.addEventListener("click", () => {
          likedMusicBtn.classList.add("active");
          myMusicBtn.classList.remove("active");
          newSongsBtn.classList.remove("active");

          likedMusicCategory.classList.add("active");
          myMusicCategory.classList.remove("active");
          newSongsCategory.classList.remove("active");

          activeCategory = "likedMusic";

          // If music is currently playing from another category, stop it
          if (currentTrack && !isLikedMusicTrack(currentTrack)) {
            stopAllTracks();
            currentTrack = null;
            currentTrackIndex = -1;
            hidePlayer();
          }
        });

        newSongsBtn.addEventListener("click", () => {
          newSongsBtn.classList.add("active");
          myMusicBtn.classList.remove("active");
          likedMusicBtn.classList.remove("active");

          newSongsCategory.classList.add("active");
          myMusicCategory.classList.remove("active");
          likedMusicCategory.classList.remove("active");

          activeCategory = "newSongs";

          // If music is currently playing from another category, stop it
          if (currentTrack && !isNewSongTrack(currentTrack)) {
            stopAllTracks();
            currentTrack = null;
            currentTrackIndex = -1;
            hidePlayer();
          }
        });

        // Helper functions to determine track category
        function isMyMusicTrack(track) {
          return (
            track === bassIshqTrack ||
            track === dilKiDuniyaTrack ||
            track === moonTrack
          );
        }

        function isLikedMusicTrack(track) {
          return oldMusicTracks.some((oldTrack) => oldTrack.element === track);
        }

        function isNewSongTrack(track) {
          return newSongsTracks.some((newTrack) => newTrack.element === track);
        }

        // Set initial volume
        rainSound.volume = 0.4;
        bassIshqTrack.volume = 0.7;
        dilKiDuniyaTrack.volume = 0.7;
        moonTrack.volume = 0.7;

        // Set initial volume for old music tracks too
        oldMusicTracks.forEach((track) => {
          track.element.volume = 0.7;
        });

        // Set initial volume for new songs tracks too
        newSongsTracks.forEach((track) => {
          track.element.volume = 0.7;
        });

        // Update rain volume UI
        rainVolumeLevel.style.width = `${rainSound.volume * 100}%`;

        let soundEnabled = false;
        let currentTrack = null;
        let rainAnimationActive = false;

        // Add styles for active track button
        const style = document.createElement("style");
        style.textContent = `
          .active-track {
            border-color: rgba(255, 200, 0, 0.8) !important;
            background: rgba(255, 200, 0, 0.15) !important;
            box-shadow: 0 0 15px rgba(255, 200, 0, 0.4) !important;
            color: rgb(255, 230, 100) !important;
          }
        `;
        document.head.appendChild(style);

        // Function to stop all music tracks
        function stopAllTracks() {
          // Stop my music tracks
          bassIshqTrack.pause();
          bassIshqTrack.currentTime = 0;
          dilKiDuniyaTrack.pause();
          dilKiDuniyaTrack.currentTime = 0;
          moonTrack.pause();
          moonTrack.currentTime = 0;

          // Stop all old music tracks
          oldMusicTracks.forEach((track) => {
            track.element.pause();
            track.element.currentTime = 0;
          });

          // Stop all new song tracks
          newSongsTracks.forEach((track) => {
            track.element.pause();
            track.element.currentTime = 0;
          });

          // Remove active class from all buttons
          homeBtn.classList.remove("active-track");
          workBtn.classList.remove("active-track");
          aboutBtn.classList.remove("active-track");
          contactBtn.classList.remove("active-track");

          // Remove playing class from all music items
          const musicItems = document.querySelectorAll(".music-item");
          musicItems.forEach((item) => item.classList.remove("playing"));
        }

        // Sound control function
        soundToggle.addEventListener("click", () => {
          if (soundEnabled) {
            rainSound.pause();
            soundIcon.textContent = "â˜ï¸";
            rainVolumeContainer.classList.remove("active");

            // Stop rain animation
            rainContainer.style.opacity = "0";
            setTimeout(() => {
              rainContainer.innerHTML = "";
              rainAnimationActive = false;
            }, 500);
          } else {
            // Play sound - need user interaction first due to autoplay policies
            rainSound.play().catch((e) => console.log("Audio play failed:", e));
            soundIcon.textContent = "â›†";
            rainVolumeContainer.classList.add("active");

            // Start rain animation
            rainContainer.style.opacity = "1";
            if (!rainAnimationActive) {
              createRain();
              rainAnimationActive = true;
            }
          }
          soundEnabled = !soundEnabled;
        });

        // Rain volume control functions
        function handleRainVolumeInteraction(e) {
          // Get correct event position for both mouse and touch
          const clientX = e.clientX || (e.touches && e.touches[0].clientX);
          if (!clientX) return;

          const rect = rainVolumeSlider.getBoundingClientRect();
          let percent = (clientX - rect.left) / rect.width;

          // Clamp values between 0 and 1
          percent = Math.max(0, Math.min(1, percent));

          // Update rain sound volume
          rainSound.volume = percent;

          // Update UI
          rainVolumeLevel.style.width = `${percent * 100}%`;
        }

        // Mouse events for rain volume
        rainVolumeSlider.addEventListener("mousedown", (e) => {
          handleRainVolumeInteraction(e);
          document.addEventListener("mousemove", handleRainVolumeInteraction);
          document.addEventListener(
            "mouseup",
            () => {
              document.removeEventListener(
                "mousemove",
                handleRainVolumeInteraction
              );
            },
            { once: true }
          );
        });

        // Touch events for rain volume on mobile
        rainVolumeSlider.addEventListener("touchstart", (e) => {
          handleRainVolumeInteraction(e);
          document.addEventListener("touchmove", handleRainVolumeInteraction);
          document.addEventListener(
            "touchend",
            () => {
              document.removeEventListener(
                "touchmove",
                handleRainVolumeInteraction
              );
            },
            { once: true }
          );
        });

        // Simple click event for rain volume
        rainVolumeSlider.addEventListener("click", (e) => {
          handleRainVolumeInteraction(e);
        });

        // Music player functions
        homeBtn.addEventListener("click", (e) => {
          e.preventDefault();

          if (currentTrack === bassIshqTrack && !bassIshqTrack.paused) {
            // If this track is already playing, pause it
            bassIshqTrack.pause();
            homeBtn.classList.remove("active-track");
            currentTrack = null;
          } else {
            // Otherwise stop other tracks and play this one
            stopAllTracks();
            bassIshqTrack
              .play()
              .catch((e) => console.log("Audio play failed:", e));
            homeBtn.classList.add("active-track");
            currentTrack = bassIshqTrack;
          }
        });

        workBtn.addEventListener("click", (e) => {
          e.preventDefault();

          if (currentTrack === dilKiDuniyaTrack && !dilKiDuniyaTrack.paused) {
            dilKiDuniyaTrack.pause();
            workBtn.classList.remove("active-track");
            currentTrack = null;
          } else {
            stopAllTracks();
            dilKiDuniyaTrack
              .play()
              .catch((e) => console.log("Audio play failed:", e));
            workBtn.classList.add("active-track");
            currentTrack = dilKiDuniyaTrack;
          }
        });

        aboutBtn.addEventListener("click", (e) => {
          e.preventDefault();

          if (currentTrack === moonTrack && !moonTrack.paused) {
            moonTrack.pause();
            aboutBtn.classList.remove("active-track");
            currentTrack = null;
          } else {
            stopAllTracks();
            moonTrack.play().catch((e) => console.log("Audio play failed:", e));
            aboutBtn.classList.add("active-track");
            currentTrack = moonTrack;
          }
        });

        contactBtn.addEventListener("click", (e) => {
          e.preventDefault();
          stopAllTracks();
          currentTrack = null;
        });

        // Random letter flickering
        const letters = document.querySelectorAll(".neon-letter");

        function randomFlicker() {
          // Remove flicker class from all letters
          letters.forEach((letter) => letter.classList.remove("flicker"));

          // Add flicker class to a random letter
          const randomIndex = Math.floor(Math.random() * letters.length);
          letters[randomIndex].classList.add("flicker");

          // Set next flicker timing
          setTimeout(randomFlicker, Math.random() * 3000 + 500);
        }

        // Start the random flickering
        randomFlicker();

        // Create raindrops
        function createRain() {
          // Clear any existing raindrops
          rainContainer.innerHTML = "";

          // Increase density for more immersive effect
          const numberOfDrops = Math.floor(window.innerWidth / 6); // Increased density from /10 to /6

          for (let i = 0; i < numberOfDrops; i++) {
            createRaindrop();
          }
        }

        function createRaindrop() {
          const drop = document.createElement("div");
          drop.classList.add("raindrop");

          // More varied sizes for better depth perception
          const size = Math.random() * 2.5 + 0.3;
          const posX = Math.random() * window.innerWidth;

          // Add varied delay for more natural effect
          const delay = Math.random() * 8;

          // More varied speeds for natural movement
          const duration = Math.random() * 1.5 + 0.3;

          // Add wind effect with slant angle
          const slantAngle = Math.random() * 10 - 3; // Slight bias toward right-leaning rain

          drop.style.left = `${posX}px`;
          drop.style.width = `${size}px`;
          drop.style.height = `${12 * size}px`;

          // Varied opacity for depth perception
          drop.style.opacity = Math.random() * 0.7 + 0.2;

          // Add better gradient for realistic appearance
          drop.style.background = `linear-gradient(to bottom, 
                                    rgba(255, 255, 255, 0), 
                                    rgba(255, 255, 255, ${
                                      Math.random() * 0.3 + 0.5
                                    }), 
                                    rgba(255, 255, 255, 0.1))`;

          drop.style.boxShadow = `0 0 ${
            Math.random() * 4
          }px rgba(255, 255, 255, 0.1)`;
          drop.style.animationDelay = `${delay}s`;
          drop.style.animationDuration = `${duration}s`;

          // Apply slant for wind effect
          drop.style.transform = `rotate(${slantAngle}deg)`;

          // Create style for raindrop animation if it doesn't exist
          if (!document.getElementById("raindrop-style")) {
            const style = document.createElement("style");
            style.id = "raindrop-style";
            style.textContent = `
              @keyframes raindrop {
                0% {
                  transform: translateY(-100px) rotate(${slantAngle}deg);
                }
                100% {
                  transform: translateY(${
                    window.innerHeight + 100
                  }px) rotate(${slantAngle}deg);
                }
              }
            `;
            document.head.appendChild(style);
          }

          drop.style.animation = `raindrop ${duration}s linear ${delay}s infinite`;
          rainContainer.appendChild(drop);

          // Remove the raindrop after animation completes to save memory
          setTimeout(() => {
            drop.remove();
            createRaindrop();
          }, (delay + duration) * 1000);

          // Create splash when raindrop hits bottom
          setTimeout(() => {
            createSplash(posX, size);
          }, (delay + duration) * 1000 - 100);
        }

        function createSplash(posX, dropSize) {
          // Multiple particles for each splash for realism
          const particleCount = Math.floor(Math.random() * 3) + 2;

          for (let i = 0; i < particleCount; i++) {
            const splash = document.createElement("div");
            splash.classList.add("splash");

            // Randomize splash position slightly around impact point
            const offsetX = Math.random() * 10 - 5;
            const bottomPosition = Math.random() * 30;

            // Size splash based on original drop
            const splashSize = (Math.random() * 2 + 1) * dropSize;

            splash.style.left = `${posX + offsetX}px`;
            splash.style.bottom = `${bottomPosition}px`;
            splash.style.width = `${splashSize}px`;
            splash.style.height = `${splashSize * 0.3}px`; // Flatter shape for splash
            splash.style.opacity = Math.random() * 0.4 + 0.1;
            splash.style.background = "rgba(255, 255, 255, 0.4)";
            splash.style.borderRadius = "50%";

            rainContainer.appendChild(splash);

            // Animate the splash with different directions
            const angle = Math.random() * 180 - 90; // -90 to 90 degrees
            const distance = Math.random() * 15 + 5;
            const duration = Math.random() * 0.5 + 0.2;

            setTimeout(() => {
              splash.style.transition = `transform ${duration}s ease-out, opacity ${duration}s ease-out`;
              splash.style.transform = `translate(${
                Math.cos(angle) * distance
              }px, ${Math.sin(angle) * distance}px) scale(0)`;
              splash.style.opacity = "0";

              setTimeout(() => {
                splash.remove();
              }, duration * 1000);
            }, 10);
          }
        }

        // Handle window resize
        window.addEventListener("resize", () => {
          // Only recreate rain if it's currently active
          if (rainAnimationActive) {
            rainContainer.innerHTML = "";
            // Remove old raindrop style
            const oldStyle = document.getElementById("raindrop-style");
            if (oldStyle) oldStyle.remove();
            createRain();
          }
        });

        // Music Player Functionality
        const musicPlayer = document.getElementById("musicPlayer");
        const playerTitle = document.getElementById("playerTitle");
        const playerArtwork = document.getElementById("playerArtwork");
        const progressBar = document.getElementById("progressBar");
        const progressCurrent = document.getElementById("progressCurrent");
        const progressHandle = document.getElementById("progressHandle");
        const currentTimeDisplay = document.getElementById("currentTime");
        const totalTimeDisplay = document.getElementById("totalTime");
        const playPauseBtn = document.getElementById("playPauseBtn");
        const prevBtn = document.getElementById("prevBtn");
        const nextBtn = document.getElementById("nextBtn");
        const shuffleBtn = document.getElementById("shuffleBtn");
        const volumeSlider = document.getElementById("volumeSlider");
        const volumeLevel = document.getElementById("volumeLevel");
        const closePlayerBtn = document.getElementById("closePlayer");

        // Track list for navigation with album artwork - Separate by category
        const myMusicTracks = [
          {
            element: bassIshqTrack,
            title: "KhamIshq",
            button: homeBtn,
            artwork: "Images/Khamishq.png",
          },
          {
            element: dilKiDuniyaTrack,
            title: "Dil Ki Duniya",
            button: workBtn,
            artwork: "Images/Dilkiduniya.png",
          },
          {
            element: moonTrack,
            title: "MoonShine",
            button: aboutBtn,
            artwork: "Images/Moonshine.png",
          },
        ];

        // Liked music tracks
        const likedTracks = oldMusicTracks.map((track) => ({
          element: track.element,
          title: track.title,
          button: null, // No button for old tracks
          artwork: "Images/oldmusic.jpg", // Default artwork for old music
        }));

        // New songs tracks
        const newSongs = newSongsTracks.map((track) => ({
          element: track.element,
          title: track.title,
          button: null, // No button for new songs
          artwork: "Images/anzar.jpg", // Default artwork for new songs
        }));

        // Shuffle state
        let shuffleEnabled = false;
        let shuffleOrder = [];

        let currentTrackIndex = -1;
        let isDragging = false;

        // Function to get current category tracks
        function getCurrentCategoryTracks() {
          if (activeCategory === "myMusic") return myMusicTracks;
          if (activeCategory === "likedMusic") return likedTracks;
          if (activeCategory === "newSongs") return newSongs;
          return myMusicTracks; // Default
        }

        function formatTime(seconds) {
          const minutes = Math.floor(seconds / 60);
          const remainingSeconds = Math.floor(seconds % 60);
          return `${minutes}:${
            remainingSeconds < 10 ? "0" : ""
          }${remainingSeconds}`;
        }

        function updateProgress() {
          if (currentTrack && !currentTrack.paused && !isDragging) {
            const percent =
              (currentTrack.currentTime / currentTrack.duration) * 100;
            progressCurrent.style.width = `${percent}%`;
            progressHandle.style.left = `${percent}%`;
            currentTimeDisplay.textContent = formatTime(
              currentTrack.currentTime
            );

            requestAnimationFrame(updateProgress);
          }
        }

        function switchTrack(index) {
          const currentTracks = getCurrentCategoryTracks();

          if (index >= 0 && index < currentTracks.length) {
            stopAllTracks();
            currentTrackIndex = index;
            currentTrack = currentTracks[currentTrackIndex].element;
            playerTitle.textContent = currentTracks[currentTrackIndex].title;

            // Update the artwork
            if (activeCategory === "myMusic") {
              playerArtwork.style.backgroundImage = `url(${currentTracks[currentTrackIndex].artwork})`;
            } else if (activeCategory === "likedMusic") {
              // For liked music, use default artwork
              playerArtwork.style.backgroundImage = `url('Images/oldmusic.jpg')`;
            } else if (activeCategory === "newSongs") {
              // For new songs, use default artwork
              playerArtwork.style.backgroundImage = `url('Images/anzar.jpg')`;
            }

            // Highlight the corresponding button if it exists
            if (activeCategory === "myMusic") {
              myMusicTracks.forEach((track) => {
                if (track.button) track.button.classList.remove("active-track");
              });

              if (currentTracks[currentTrackIndex].button) {
                currentTracks[currentTrackIndex].button.classList.add(
                  "active-track"
                );
              }
            } else if (activeCategory === "likedMusic") {
              // For liked music, highlight the item in the grid
              const musicItems = document.querySelectorAll(".music-item");
              musicItems.forEach((item) => item.classList.remove("playing"));

              // Find the corresponding old music track
              if (index >= 0 && index < oldMusicTracks.length) {
                const trackId = oldMusicTracks[index].id;
                const item = document.querySelector(
                  `.music-item[data-track-id="${trackId}"]`
                );
                if (item) item.classList.add("playing");
              }
            } else if (activeCategory === "newSongs") {
              // For new songs, highlight the item in the grid
              const musicItems = document.querySelectorAll(".music-item");
              musicItems.forEach((item) => item.classList.remove("playing"));

              // Find the corresponding new song track
              if (index >= 0 && index < newSongsTracks.length) {
                const trackId = newSongsTracks[index].id;
                const item = document.querySelector(
                  `.music-item[data-track-id="${trackId}"]`
                );
                if (item) item.classList.add("playing");
              }
            }

            // Ensure the player is visible and properly positioned before playing
            if (!musicPlayer.classList.contains("active")) {
              showPlayer();
            }

            playTrack();
          }
        }

        function getNextTrackIndex() {
          const currentTracks = getCurrentCategoryTracks();

          if (shuffleEnabled && shuffleOrder.length > 0) {
            // Get the next track from shuffle order
            const currentShuffleIndex = shuffleOrder.findIndex(
              (idx) => idx === currentTrackIndex
            );
            if (
              currentShuffleIndex !== -1 &&
              currentShuffleIndex < shuffleOrder.length - 1
            ) {
              return shuffleOrder[currentShuffleIndex + 1];
            } else {
              // Reshuffle if we're at the end
              generateShuffleOrder();
              return shuffleOrder[0];
            }
          } else {
            // Normal sequential next
            let nextIndex = currentTrackIndex + 1;
            if (nextIndex >= currentTracks.length) nextIndex = 0;
            return nextIndex;
          }
        }

        function getPrevTrackIndex() {
          const currentTracks = getCurrentCategoryTracks();

          if (shuffleEnabled && shuffleOrder.length > 0) {
            // Get the previous track from shuffle order
            const currentShuffleIndex = shuffleOrder.findIndex(
              (idx) => idx === currentTrackIndex
            );
            if (currentShuffleIndex > 0) {
              return shuffleOrder[currentShuffleIndex - 1];
            } else {
              // Go to the end of the shuffle list
              return shuffleOrder[shuffleOrder.length - 1];
            }
          } else {
            // Normal sequential prev
            let prevIndex = currentTrackIndex - 1;
            if (prevIndex < 0) prevIndex = currentTracks.length - 1;
            return prevIndex;
          }
        }

        function generateShuffleOrder() {
          const currentTracks = getCurrentCategoryTracks();
          const indices = Array.from(
            { length: currentTracks.length },
            (_, i) => i
          );

          // Fisher-Yates shuffle algorithm
          for (let i = indices.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [indices[i], indices[j]] = [indices[j], indices[i]];
          }

          shuffleOrder = indices;

          // Ensure the current track is not the first in the shuffle order
          if (
            currentTrackIndex !== -1 &&
            shuffleOrder[0] === currentTrackIndex &&
            shuffleOrder.length > 1
          ) {
            // Swap the first track with another one
            const swapIndex =
              Math.floor(Math.random() * (shuffleOrder.length - 1)) + 1;
            [shuffleOrder[0], shuffleOrder[swapIndex]] = [
              shuffleOrder[swapIndex],
              shuffleOrder[0],
            ];
          }
        }

        function toggleShuffle() {
          shuffleEnabled = !shuffleEnabled;

          if (shuffleEnabled) {
            shuffleBtn.classList.add("active");
            generateShuffleOrder();
          } else {
            shuffleBtn.classList.remove("active");
            shuffleOrder = [];
          }
        }

        function playTrack() {
          if (currentTrack) {
            currentTrack
              .play()
              .catch((e) => console.log("Audio play failed:", e));
            playPauseBtn.innerHTML = "â¸";

            // Update the total duration display
            if (currentTrack.readyState >= 1) {
              totalTimeDisplay.textContent = formatTime(currentTrack.duration);
            } else {
              currentTrack.addEventListener("loadedmetadata", () => {
                totalTimeDisplay.textContent = formatTime(
                  currentTrack.duration
                );
              });
            }

            // Start progress tracking
            requestAnimationFrame(updateProgress);
          }
        }

        function pauseTrack() {
          if (currentTrack) {
            currentTrack.pause();
            playPauseBtn.innerHTML = "â–¶";
          }
        }

        function showPlayer() {
          // Make sure we set a default background for the artwork if no track is selected
          if (currentTrackIndex === -1) {
            playerArtwork.style.backgroundImage = "none";
            playerArtwork.style.backgroundColor = "rgba(0, 0, 0, 0.2)";
          }

          // Reset positioning for mobile before showing the player
          if (window.matchMedia("(max-width: 768px)").matches) {
            // First remove any previous classes
            musicPlayer.classList.remove("mobile-centered");

            // For smaller screens like iPhone X and SE, use centered modal style regardless of height
            if (window.innerWidth <= 375) {
              musicPlayer.style.opacity = "0";
              musicPlayer.style.visibility = "visible";
              musicPlayer.classList.add("mobile-centered");

              // Position it in the center for smaller screens
              musicPlayer.style.bottom = "50%";
              musicPlayer.style.left = "50%";
              musicPlayer.style.top = "auto";
              musicPlayer.style.width = "85%";
              musicPlayer.style.transform = "translate(-50%, 50%)";
              musicPlayer.style.borderRadius = "20px";

              // Add active class
              musicPlayer.classList.add("active");

              // Ensure opacity transition works
              setTimeout(() => {
                musicPlayer.style.opacity = "1";
              }, 10);
            }
            // For larger screens or landscape orientation on small devices
            else if (window.innerHeight < 600 || window.innerWidth < 380) {
              // For very small screens or landscape mode, use bottom sheet style
              musicPlayer.style.bottom = "-100%";
              musicPlayer.style.left = "0";
              musicPlayer.style.right = "0";
              musicPlayer.style.width = "100%";
              musicPlayer.style.transform = "none";
              musicPlayer.style.borderRadius = "20px 20px 0 0";

              // Add active class first without the position change
              musicPlayer.classList.add("active");

              // Then after a small delay, change position for smoother animation
              setTimeout(() => {
                musicPlayer.style.bottom = "0";
              }, 10);
            } else {
              // For normal sized phones, use centered modal style
              musicPlayer.style.opacity = "0";
              musicPlayer.style.visibility = "visible";
              musicPlayer.classList.add("mobile-centered");

              // Add active class
              musicPlayer.classList.add("active");

              // Ensure opacity transition works
              setTimeout(() => {
                musicPlayer.style.opacity = "1";
              }, 10);
            }
          } else {
            // Desktop positioning remains the same
            musicPlayer.classList.add("active");

            // Add positioned class after a small delay to allow initial animation
            setTimeout(() => {
              musicPlayer.classList.add("positioned");
            }, 500);
          }
        }

        function hidePlayer() {
          // For mobile, adjust animation based on current style
          if (window.matchMedia("(max-width: 768px)").matches) {
            if (musicPlayer.classList.contains("mobile-centered")) {
              musicPlayer.style.opacity = "0";

              setTimeout(() => {
                musicPlayer.classList.remove("active");
                musicPlayer.classList.remove("mobile-centered");
                musicPlayer.style.visibility = "hidden";
              }, 400);
            } else {
              // Bottom sheet style
              musicPlayer.style.bottom = "-100%";

              setTimeout(() => {
                musicPlayer.classList.remove("active");
              }, 400);
            }
          } else {
            // Desktop behavior
            musicPlayer.classList.remove("active");
            musicPlayer.classList.remove("positioned");

            // Reset these properties immediately to ensure proper drag on next open
            musicPlayer.style.left = "";
            musicPlayer.style.top = "";
          }
        }

        // Improved event handling for both mouse and touch events
        function handleProgressBarInteraction(e) {
          if (!currentTrack) return;

          // Get correct event position for both mouse and touch
          const clientX = e.clientX || (e.touches && e.touches[0].clientX);
          if (!clientX) return;

          const rect = progressBar.getBoundingClientRect();
          let percent = (clientX - rect.left) / rect.width;

          // Clamp values between 0 and 1
          percent = Math.max(0, Math.min(1, percent));

          currentTrack.currentTime = percent * currentTrack.duration;

          // Update UI
          progressCurrent.style.width = `${percent * 100}%`;
          progressHandle.style.left = `${percent * 100}%`;
        }

        function handleVolumeSliderInteraction(e) {
          // Get correct event position for both mouse and touch
          const clientX = e.clientX || (e.touches && e.touches[0].clientX);
          if (!clientX) return;

          const rect = volumeSlider.getBoundingClientRect();
          let percent = (clientX - rect.left) / rect.width;

          // Clamp values between 0 and 1
          percent = Math.max(0, Math.min(1, percent));

          // Update ALL audio elements volume
          bassIshqTrack.volume = percent;
          dilKiDuniyaTrack.volume = percent;
          moonTrack.volume = percent;

          // Update old music tracks volume
          oldMusicTracks.forEach((track) => {
            track.element.volume = percent;
          });

          // Update new songs tracks volume
          newSongsTracks.forEach((track) => {
            track.element.volume = percent;
          });

          // Update UI
          volumeLevel.style.width = `${percent * 100}%`;
        }

        // Handle progress bar interactions
        progressBar.addEventListener("mousedown", (e) => {
          isDragging = true;
          handleProgressBarInteraction(e);
          document.addEventListener("mousemove", handleProgressBarInteraction);
          document.addEventListener(
            "mouseup",
            () => {
              isDragging = false;
              document.removeEventListener(
                "mousemove",
                handleProgressBarInteraction
              );
              // Resume progress updates
              if (currentTrack && !currentTrack.paused) {
                requestAnimationFrame(updateProgress);
              }
            },
            { once: true }
          );
        });

        // Touch events for mobile
        progressBar.addEventListener("touchstart", (e) => {
          isDragging = true;
          handleProgressBarInteraction(e);
          document.addEventListener("touchmove", handleProgressBarInteraction);
          document.addEventListener(
            "touchend",
            () => {
              isDragging = false;
              document.removeEventListener(
                "touchmove",
                handleProgressBarInteraction
              );
              // Resume progress updates
              if (currentTrack && !currentTrack.paused) {
                requestAnimationFrame(updateProgress);
              }
            },
            { once: true }
          );
        });

        // Volume slider events
        volumeSlider.addEventListener("mousedown", (e) => {
          handleVolumeSliderInteraction(e);
          document.addEventListener("mousemove", handleVolumeSliderInteraction);
          document.addEventListener(
            "mouseup",
            () => {
              document.removeEventListener(
                "mousemove",
                handleVolumeSliderInteraction
              );
            },
            { once: true }
          );
        });

        // Touch events for volume
        volumeSlider.addEventListener("touchstart", (e) => {
          handleVolumeSliderInteraction(e);
          document.addEventListener("touchmove", handleVolumeSliderInteraction);
          document.addEventListener(
            "touchend",
            () => {
              document.removeEventListener(
                "touchmove",
                handleVolumeSliderInteraction
              );
            },
            { once: true }
          );
        });

        // Event Listeners for player controls
        playPauseBtn.addEventListener("click", () => {
          if (!currentTrack) return;

          if (currentTrack.paused) {
            playTrack();
          } else {
            pauseTrack();
          }
        });

        prevBtn.addEventListener("click", () => {
          const prevIndex = getPrevTrackIndex();
          switchTrack(prevIndex);
        });

        nextBtn.addEventListener("click", () => {
          const nextIndex = getNextTrackIndex();
          switchTrack(nextIndex);
        });

        shuffleBtn.addEventListener("click", toggleShuffle);

        progressBar.addEventListener("click", (e) => {
          if (!currentTrack) return;

          const rect = progressBar.getBoundingClientRect();
          const percent = (e.clientX - rect.left) / rect.width;
          currentTrack.currentTime = percent * currentTrack.duration;

          // Update the UI immediately
          progressCurrent.style.width = `${percent * 100}%`;
          progressHandle.style.left = `${percent * 100}%`;
        });

        volumeSlider.addEventListener("click", (e) => {
          const rect = volumeSlider.getBoundingClientRect();
          const percent = (e.clientX - rect.left) / rect.width;

          // Update all audio elements volume
          bassIshqTrack.volume = percent;
          dilKiDuniyaTrack.volume = percent;
          moonTrack.volume = percent;

          // Update old music tracks volume
          oldMusicTracks.forEach((track) => {
            track.element.volume = percent;
          });

          // Update new songs tracks volume
          newSongsTracks.forEach((track) => {
            track.element.volume = percent;
          });

          // Update the UI
          volumeLevel.style.width = `${percent * 100}%`;
        });

        closePlayerBtn.addEventListener("click", hidePlayer);

        // Modify existing music button click handlers to use the player
        homeBtn.addEventListener("click", (e) => {
          e.preventDefault();
          if (activeCategory === "myMusic") {
            switchTrack(0);
          }
        });

        workBtn.addEventListener("click", (e) => {
          e.preventDefault();
          if (activeCategory === "myMusic") {
            switchTrack(1);
          }
        });

        aboutBtn.addEventListener("click", (e) => {
          e.preventDefault();
          if (activeCategory === "myMusic") {
            switchTrack(2);
          }
        });

        contactBtn.addEventListener("click", (e) => {
          e.preventDefault();
          hidePlayer();
          stopAllTracks();
        });

        // Event handlers for when tracks end
        bassIshqTrack.addEventListener("ended", () => {
          if (activeCategory === "myMusic") {
            const nextIndex = getNextTrackIndex();
            switchTrack(nextIndex);
          }
        });

        dilKiDuniyaTrack.addEventListener("ended", () => {
          if (activeCategory === "myMusic") {
            const nextIndex = getNextTrackIndex();
            switchTrack(nextIndex);
          }
        });

        moonTrack.addEventListener("ended", () => {
          if (activeCategory === "myMusic") {
            const nextIndex = getNextTrackIndex();
            switchTrack(nextIndex);
          }
        });

        // Make sure all old music tracks end event is handled
        oldMusicTracks.forEach((track, idx) => {
          track.element.addEventListener("ended", () => {
            if (activeCategory === "likedMusic") {
              const nextIndex = getNextTrackIndex();
              switchTrack(nextIndex);
            }
          });
        });

        // Make sure all new songs tracks end event is handled
        newSongsTracks.forEach((track, idx) => {
          track.element.addEventListener("ended", () => {
            if (activeCategory === "newSongs") {
              const nextIndex = getNextTrackIndex();
              switchTrack(nextIndex);
            }
          });
        });

        // Initialize with no artwork background
        playerArtwork.style.backgroundColor = "rgba(0, 0, 0, 0.2)";

        // Initialize volume UI based on initial audio volume
        volumeLevel.style.width = `${bassIshqTrack.volume * 100}%`;

        // Make music player draggable for desktop screens
        const musicPlayerDrag = (() => {
          const musicPlayer = document.getElementById("musicPlayer");
          const dragHandle = document.getElementById("dragHandle");
          let isDragging = false;
          let offsetX, offsetY;

          // List of elements that should not initiate drag
          const noDragElements = [
            "button",
            ".progress-bar",
            ".progress-handle",
            ".volume-slider",
            ".player-btn",
            ".close-player",
          ];

          // Only enable dragging for non-mobile devices
          if (window.matchMedia("(min-width: 769px)").matches) {
            // Enable dragging from anywhere on the player
            musicPlayer.addEventListener("mousedown", (e) => {
              // Check if the click is on an interactive element
              const target = e.target;

              // Don't start drag if clicking on controls
              if (shouldPreventDrag(target)) {
                return;
              }

              startDrag(e);
            });
          }

          // Function to check if we should prevent dragging
          function shouldPreventDrag(element) {
            // Check if element or its parent matches any in the noDragElements list
            for (let i = 0; i < noDragElements.length; i++) {
              const selector = noDragElements[i];
              if (element.matches && element.matches(selector)) {
                return true;
              }

              // Check parents too (for nested elements like icons inside buttons)
              let parent = element.closest && element.closest(selector);
              if (parent) return true;
            }

            // Also prevent drag on specific elements by ID
            const noDragIds = [
              "progressBar",
              "volumeSlider",
              "playerArtwork",
              "progressHandle",
              "progressCurrent",
              "volumeLevel",
            ];
            if (noDragIds.includes(element.id)) {
              return true;
            }

            return false;
          }

          function startDrag(e) {
            if (musicPlayer.classList.contains("active")) {
              e.preventDefault();

              // Ensure positioned class is added
              musicPlayer.classList.add("positioned");

              // Get initial position - recalculate every time
              const rect = musicPlayer.getBoundingClientRect();

              // Calculate offset from pointer to player edges
              offsetX = e.clientX - rect.left;
              offsetY = e.clientY - rect.top;

              // Add dragging class for visual feedback
              musicPlayer.classList.add("dragging");
              isDragging = true;

              // Register move and end events
              document.addEventListener("mousemove", drag);
              document.addEventListener("mouseup", endDrag);
            }
          }

          function drag(e) {
            if (!isDragging) return;

            // Prevent default behaviors
            e.preventDefault();

            // Calculate new position
            const x = e.clientX - offsetX;
            const y = e.clientY - offsetY;

            // Apply constraints to keep player visible
            const playerWidth = musicPlayer.offsetWidth;
            const playerHeight = musicPlayer.offsetHeight;

            // Keep player within window bounds
            const maxX = window.innerWidth - playerWidth * 0.3;
            const maxY = window.innerHeight - playerHeight * 0.2;
            const minX = -playerWidth * 0.7;
            const minY = -playerHeight * 0.1;

            // Apply constrained position with direct positioning
            // Use top/left instead of transform to avoid conflicts
            const constrainedX = Math.min(Math.max(x, minX), maxX);
            const constrainedY = Math.min(Math.max(y, minY), maxY);

            musicPlayer.style.left = `${constrainedX}px`;
            musicPlayer.style.top = `${constrainedY}px`;
            musicPlayer.style.right = "auto"; // Clear right positioning
            musicPlayer.style.transform = "none"; // Clear transform
          }

          function endDrag() {
            isDragging = false;
            musicPlayer.classList.remove("dragging");

            // Remove event listeners
            document.removeEventListener("mousemove", drag);
            document.removeEventListener("mouseup", endDrag);
          }

          // Add a reset method for complete reinitialization
          function resetPosition() {
            if (window.matchMedia("(min-width: 769px)").matches) {
              // Clear all positioning before resetting to default
              musicPlayer.style.left = "";
              musicPlayer.style.top = "";
              musicPlayer.style.right = "20px";
              musicPlayer.style.transform = "translate(0, -50%)";
            }
          }

          // Reset player position before showing it again
          const originalShowPlayer = showPlayer;
          showPlayer = function () {
            // Reset positioning before showing
            if (window.matchMedia("(min-width: 769px)").matches) {
              resetPosition();
            }
            // Call original function
            originalShowPlayer();
          };

          // Reset position when player is closed
          closePlayerBtn.addEventListener("click", hidePlayer);

          // Adjust for window resize
          window.addEventListener("resize", () => {
            // Reset position appropriately based on screen size
            if (window.matchMedia("(max-width: 768px)").matches) {
              // Mobile layout
              if (musicPlayer.classList.contains("active")) {
                // For smaller screens like iPhone X and SE, ensure centered positioning
                if (window.innerWidth <= 375) {
                  musicPlayer.classList.add("mobile-centered");
                  musicPlayer.style.bottom = "50%";
                  musicPlayer.style.left = "50%";
                  musicPlayer.style.top = "auto";
                  musicPlayer.style.width = "85%";
                  musicPlayer.style.transform = "translate(-50%, 50%)";
                  musicPlayer.style.borderRadius = "20px";
                }
                // For other mobile screens
                else if (musicPlayer.classList.contains("mobile-centered")) {
                  // If player is active on mobile with centered class, keep it centered
                  musicPlayer.style.bottom = "50%";
                  musicPlayer.style.left = "50%";
                  musicPlayer.style.right = "auto";
                  musicPlayer.style.transform = "translate(-50%, 50%)";
                } else {
                  // For bottom sheet style on larger mobile devices
                  musicPlayer.style.bottom = "0";
                  musicPlayer.style.left = "0";
                  musicPlayer.style.right = "0";
                  musicPlayer.style.transform = "none";
                }
              } else {
                // If player is inactive on mobile, keep it off-screen
                musicPlayer.style.bottom = "-100%";
                musicPlayer.style.left = "0";
                musicPlayer.style.right = "0";
                musicPlayer.style.transform = "none";
              }
            } else {
              // Desktop layout - reset to right side
              if (
                !isDragging &&
                musicPlayer.classList.contains("active") &&
                !musicPlayer.classList.contains("positioned")
              ) {
                musicPlayer.style.right = "20px";
                musicPlayer.style.left = "";
                musicPlayer.style.top = "50%";
                musicPlayer.style.transform = "translate(0, -50%)";
              }
            }
          });

          // Return public methods if needed
          return {
            reset: resetPosition,
          };
        })();

        // Add a debug check to verify player visibility
        window.checkPlayerVisibility = () => {
          console.log(
            "Player active:",
            musicPlayer.classList.contains("active")
          );
          console.log(
            "Player visibility:",
            getComputedStyle(musicPlayer).visibility
          );
          console.log("Player opacity:", getComputedStyle(musicPlayer).opacity);
          console.log(
            "Player transform:",
            getComputedStyle(musicPlayer).transform
          );
          console.log(
            "Player dimensions:",
            musicPlayer.offsetWidth,
            "x",
            musicPlayer.offsetHeight
          );
        };

        // QR Code Button Functionality
        const qrCodeBtn = document.getElementById("qrCodeBtn");
        const qrCodeModal = document.getElementById("qrCodeModal");
        const closeQrBtn = document.getElementById("closeQrBtn");

        qrCodeBtn.addEventListener("click", () => {
          qrCodeModal.classList.add("active");
          // Pause music if it's playing to avoid distractions
          if (currentTrack && !currentTrack.paused) {
            pauseTrack();
            // Set a flag to remember we paused it
            currentTrack.dataset.pausedByQr = "true";
          }
        });

        closeQrBtn.addEventListener("click", () => {
          qrCodeModal.classList.remove("active");
          // Resume music if it was playing before
          if (currentTrack && currentTrack.dataset.pausedByQr === "true") {
            playTrack();
            delete currentTrack.dataset.pausedByQr;
          }
        });

        // Close modal when clicking outside the QR code container
        qrCodeModal.addEventListener("click", (e) => {
          if (e.target === qrCodeModal) {
            qrCodeModal.classList.remove("active");
            // Resume music if it was playing before
            if (currentTrack && currentTrack.dataset.pausedByQr === "true") {
              playTrack();
              delete currentTrack.dataset.pausedByQr;
            }
          }
        });

        // Add the missing functions for playing old music and new songs
        function playOldMusic(track) {
          stopAllTracks();

          // Remove playing class from all items
          const musicItems = document.querySelectorAll(".music-item");
          musicItems.forEach((item) => item.classList.remove("playing"));

          // Add playing class to the clicked item
          const clickedItem = document.querySelector(
            `.music-item[data-track-id="${track.id}"]`
          );
          if (clickedItem) clickedItem.classList.add("playing");

          // Set the current track
          currentTrack = track.element;

          // Find the track index in the oldMusicTracks array
          const trackIndex = oldMusicTracks.findIndex((t) => t.id === track.id);
          currentTrackIndex = trackIndex >= 0 ? trackIndex : 0;

          // Update the player title
          playerTitle.textContent = track.title;

          // Set artwork for old music
          playerArtwork.style.backgroundImage = `url('Images/oldmusic.jpg')`;

          // Show the player if it's not already visible
          if (!musicPlayer.classList.contains("active")) {
            showPlayer();
          }

          // Play the track
          playTrack();
        }

        function playNewSong(track) {
          stopAllTracks();

          // Remove playing class from all items
          const musicItems = document.querySelectorAll(".music-item");
          musicItems.forEach((item) => item.classList.remove("playing"));

          // Add playing class to the clicked item
          const clickedItem = document.querySelector(
            `.music-item[data-track-id="${track.id}"]`
          );
          if (clickedItem) clickedItem.classList.add("playing");

          // Set the current track
          currentTrack = track.element;

          // Find the track index in the newSongsTracks array
          const trackIndex = newSongsTracks.findIndex((t) => t.id === track.id);
          currentTrackIndex = trackIndex >= 0 ? trackIndex : 0;

          // Update the player title
          playerTitle.textContent = track.title;

          // Set artwork for new songs
          playerArtwork.style.backgroundImage = `url('Images/anzar.jpg')`;

          // Show the player if it's not already visible
          if (!musicPlayer.classList.contains("active")) {
            showPlayer();
          }

          // Play the track
          playTrack();
        }
      });
    </script>
  </body>
</html>
